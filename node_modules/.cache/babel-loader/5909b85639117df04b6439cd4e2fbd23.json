{"ast":null,"code":"var _jsxFileName = \"/Users/bridgerbrown/ecommerce-basic/src/components/AddProduct.js\";\nimport React, { Component } from \"react\";\nimport withContext from \"../withContext\";\nimport { Navigate } from \"react-router-dom\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initState = {\n  name: \"\",\n  price: \"\",\n  stock: \"\",\n  shortDesc: \"\",\n  description: \"\"\n};\n\nclass AddProduct extends Component {\n  constructor(props) {\n    super(props);\n\n    this.save = async e => {\n      e.preventDefault();\n      const {\n        name,\n        price,\n        stock,\n        shortDesc,\n        description\n      } = this.state;\n\n      if (name && price) {\n        const id = Math.random().toString(36).substring(2) + Date.now().toString(36);\n        await axios.post('http://localhost:3001/products', {\n          id,\n          name,\n          price,\n          stock,\n          shortDesc,\n          description\n        });\n        this.props.context.addProduct({\n          name,\n          price,\n          shortDesc,\n          description,\n          stock: stock || 0\n        }, () => this.setState(initState));\n        this.setState({\n          flash: {\n            status: 'is-success',\n            msg: 'Product created successfully'\n          }\n        });\n      } else {\n        this.setState({\n          flash: {\n            status: 'is-danger',\n            msg: 'Please enter name and price'\n          }\n        });\n      }\n    };\n\n    this.handleChange = e => this.setState({\n      [e.target.name]: e.target.value,\n      error: \"\"\n    });\n\n    this.state = initState;\n  }\n\n  render() {\n    const {\n      name,\n      price,\n      stock,\n      shortDesc,\n      description\n    } = this.state;\n    const {\n      user\n    } = this.props.context;\n    return !(user && user.accessLevel < 1) ? /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hero is-primary \",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hero-body container\",\n          children: /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"title\",\n            children: \"Add Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.save,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"columns is-mobile is-centered\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"column is-one-third\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Product Name: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                type: \"text\",\n                name: \"name\",\n                value: name,\n                onChange: this.handleChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Price: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                type: \"number\",\n                name: \"price\",\n                value: price,\n                onChange: this.handleChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Available in Stock: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                type: \"number\",\n                name: \"stock\",\n                value: stock,\n                onChange: this.handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Short Description: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                type: \"text\",\n                name: \"shortDesc\",\n                value: shortDesc,\n                onChange: this.handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Description: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"textarea\",\n                type: \"text\",\n                rows: \"2\",\n                style: {\n                  resize: \"none\"\n                },\n                name: \"description\",\n                value: description,\n                onChange: this.handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 25\n            }, this), this.state.flash && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `notification ${this.state.flash.status}`,\n              children: this.state.flash.msg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field is-clearfix\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"button is-primary is-outlined is-pulled-right\",\n                type: \"submit\",\n                onClick: this.save,\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true);\n  }\n\n}","map":{"version":3,"names":["React","Component","withContext","Navigate","axios","initState","name","price","stock","shortDesc","description","AddProduct","constructor","props","save","e","preventDefault","state","id","Math","random","toString","substring","Date","now","post","context","addProduct","setState","flash","status","msg","handleChange","target","value","error","render","user","accessLevel","resize"],"sources":["/Users/bridgerbrown/ecommerce-basic/src/components/AddProduct.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport withContext from \"../withContext\";\nimport { Navigate } from \"react-router-dom\";\nimport axios from 'axios'\n\nconst initState = {\n    name: \"\",\n    price: \"\",\n    stock: \"\",\n    shortDesc: \"\",\n    description: \"\"\n}\n\nclass AddProduct extends Component {\n    constructor(props) {\n        super(props)\n        this.state = initState\n    }\n\n    save = async (e) => {\n        e.preventDefault()\n        const { name, price, stock, shortDesc, description } = this.state\n\n        if (name && price) {\n            const id = Math.random().toString(36).substring(2) + Date.now().toString(36)\n\n            await axios.post(\n                'http://localhost:3001/products',\n                { id, name, price, stock, shortDesc, description }\n            )\n\n            this.props.context.addProduct(\n                {\n                    name,\n                    price,\n                    shortDesc,\n                    description,\n                    stock: stock || 0\n                },\n                () => this.setState(initState)\n            )\n            this.setState(\n                { flash: { status: 'is-success', msg: 'Product created successfully' }}\n            )\n\n        } else {\n            this.setState(\n                { flash: { status: 'is-danger', msg: 'Please enter name and price' }}\n            )\n        }\n    }\n\n    handleChange = e => this.setState({ [e.target.name]: e.target.value, error: \"\" })\n\nrender(){\n    const { name, price, stock, shortDesc, description } = this.state\n    const { user } = this.props.context\n\n    return !(user && user.accessLevel < 1) ? (\n        <Redirect to=\"/\" />\n    ) : (\n        <>\n            <div className=\"hero is-primary \">\n                <div className=\"hero-body container\">\n                    <h4 className=\"title\">Add Product</h4>\n                </div>\n            </div>\n            <br />\n            <br />\n            <form onSubmit={this.save}>\n                <div className=\"columns is-mobile is-centered\">\n                    <div className=\"column is-one-third\">\n                        <div className=\"field\">\n                            <label className=\"label\">Product Name: </label>\n                            <input\n                            className=\"input\"\n                            type=\"text\"\n                            name=\"name\"\n                            value={name}\n                            onChange={this.handleChange}\n                            required\n                            />\n                        </div>\n                        <div className=\"field\">\n                            <label className=\"label\">Price: </label>\n                            <input\n                            className=\"input\"\n                            type=\"number\"\n                            name=\"price\"\n                            value={price}\n                            onChange={this.handleChange}\n                            required\n                            />\n                        </div>\n                        <div className=\"field\">\n                            <label className=\"label\">Available in Stock: </label>\n                            <input\n                            className=\"input\"\n                            type=\"number\"\n                            name=\"stock\"\n                            value={stock}\n                            onChange={this.handleChange}\n                            />\n                        </div>\n                        <div className=\"field\">\n                            <label className=\"label\">Short Description: </label>\n                            <input\n                            className=\"input\"\n                            type=\"text\"\n                            name=\"shortDesc\"\n                            value={shortDesc}\n                            onChange={this.handleChange}\n                            />\n                        </div>\n                        <div className=\"field\">\n                            <label className=\"label\">Description: </label>\n                            <textarea\n                            className=\"textarea\"\n                            type=\"text\"\n                            rows=\"2\"\n                            style={{ resize: \"none\" }}\n                            name=\"description\"\n                            value={description}\n                            onChange={this.handleChange}\n                            />\n                        </div>\n                        {this.state.flash && (\n                            <div className={`notification ${this.state.flash.status}`}>\n                            {this.state.flash.msg}\n                            </div>\n                        )}\n                        <div className=\"field is-clearfix\">\n                            <button\n                            className=\"button is-primary is-outlined is-pulled-right\"\n                            type=\"submit\"\n                            onClick={this.save}\n                            >\n                            Submit\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </form>       \n        </>\n        )\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}