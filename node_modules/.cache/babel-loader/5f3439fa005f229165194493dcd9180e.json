{"ast":null,"code":"import _defineProperty from\"/Users/bridgerbrown/ecommerce-basic/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/Users/bridgerbrown/ecommerce-basic/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/bridgerbrown/ecommerce-basic/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/bridgerbrown/ecommerce-basic/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/bridgerbrown/ecommerce-basic/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import{Navigate}from\"react-router-dom\";import withContext from\"../withContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleChange=function(e){var _this$setState;return _this.setState((_this$setState={},_defineProperty(_this$setState,e.target.name,e.target.value),_defineProperty(_this$setState,\"error\",\"\"),_this$setState));};_this.login=function(e){e.preventDefault();var _this$state=_this.state,username=_this$state.username,password=_this$state.password;if(!username||!password){return _this.setState({error:\"Fill all fields!\"});}_this.props.context.login(username,password).then(function(loggedIn){if(!loggedIn){_this.setState({error:\"Invalid Credentials\"});}});};_this.state={username:\"\",password:\"\"};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return!this.props.context.user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"hero is-primary\",children:/*#__PURE__*/_jsx(\"div\",{className:\"hero-body container\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"title\",children:\"Login\"})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"form\",{onSubmit:this.login,children:/*#__PURE__*/_jsx(\"div\",{className:\"columns is-mobile is-centered\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"column is-one-third\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Email: \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"email\",name:\"username\",onChange:this.handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"password\",name:\"password\",onChange:this.handleChange})]}),this.state.error&&/*#__PURE__*/_jsx(\"div\",{className:\"has-text-danger\",children:this.state.error}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-clearfix\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-primary is-outlined is-pulled-right\",children:\"Submit\"})})]})})})]}):/*#__PURE__*/_jsx(Navigate,{to:\"/products\"});}}]);return Login;}(Component);export default withContext(Login);","map":{"version":3,"names":["React","Component","Navigate","withContext","Login","props","handleChange","e","setState","target","name","value","login","preventDefault","state","username","password","error","context","then","loggedIn","user"],"sources":["/Users/bridgerbrown/ecommerce-basic/src/components/Login.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { Navigate } from \"react-router-dom\"\nimport withContext from \"../withContext\"\n\nclass Login extends Component { \n    constructor(props) {\n        super(props)\n        this.state = {\n            username: \"\",\n            password: \"\"\n        }\n    }\n\n    handleChange = e => this.setState({ [e.target.name]: e.target.value, error: \"\" })\n\n    login = (e) => {\n        e.preventDefault()\n\n        const { username, password } = this.state\n        if (!username || !password) {\n            return this.setState({ error: \"Fill all fields!\" })\n        }\n        this.props.context.login(username, password)\n            .then((loggedIn) => {\n                if (!loggedIn) {\n                    this.setState({ error: \"Invalid Credentials\" })\n                }\n            })\n    }\n\n    render() {\n        return !this.props.context.user ? (\n                <>\n                    <div className=\"hero is-primary\">\n                        <div className=\"hero-body container\">\n                            <h4 className=\"title\">Login</h4>\n                        </div>\n                    </div>\n                    <br />\n                    <br />\n                    <form onSubmit={this.login}>\n                        <div className=\"columns is-mobile is-centered\">\n                            <div className=\"column is-one-third\">\n                                <div className=\"field\">\n                                    <label className=\"label\">Email: </label>\n                                    <input\n                                        className=\"input\"\n                                        type=\"email\"\n                                        name=\"username\"\n                                        onChange={this.handleChange}\n                                    />\n                                </div>\n                                <div className=\"field\">\n                                    <label className=\"label\">Password: </label>\n                                    <input\n                                        className=\"input\"\n                                        type=\"password\"\n                                        name=\"password\"\n                                        onChange={this.handleChange}\n                                    />\n                                </div>                            \n                            {this.state.error && (\n                                <div className=\"has-text-danger\">{this.state.error}</div>\n                            )}\n                            <div className=\"field is-clearfix\">\n                                <button\n                                    className=\"button is-primary is-outlined is-pulled-right\"\n                                >\n                                    Submit\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </>\n        ) : (\n            <Navigate to=\"/products\" />\n        )\n    }\n}\n\nexport default withContext(Login)"],"mappings":"+kBAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,YAAP,KAAwB,gBAAxB,C,gJAEMC,M,8FACF,eAAYC,KAAZ,CAAmB,uCACf,uBAAMA,KAAN,EADe,MAQnBC,YARmB,CAQJ,SAAAC,CAAC,2BAAI,OAAKC,QAAL,mDAAiBD,CAAC,CAACE,MAAF,CAASC,IAA1B,CAAiCH,CAAC,CAACE,MAAF,CAASE,KAA1C,yCAAwD,EAAxD,kBAAJ,EARG,OAUnBC,KAVmB,CAUX,SAACL,CAAD,CAAO,CACXA,CAAC,CAACM,cAAF,GAEA,gBAA+B,MAAKC,KAApC,CAAQC,QAAR,aAAQA,QAAR,CAAkBC,QAAlB,aAAkBA,QAAlB,CACA,GAAI,CAACD,QAAD,EAAa,CAACC,QAAlB,CAA4B,CACxB,MAAO,OAAKR,QAAL,CAAc,CAAES,KAAK,CAAE,kBAAT,CAAd,CAAP,CACH,CACD,MAAKZ,KAAL,CAAWa,OAAX,CAAmBN,KAAnB,CAAyBG,QAAzB,CAAmCC,QAAnC,EACKG,IADL,CACU,SAACC,QAAD,CAAc,CAChB,GAAI,CAACA,QAAL,CAAe,CACX,MAAKZ,QAAL,CAAc,CAAES,KAAK,CAAE,qBAAT,CAAd,EACH,CACJ,CALL,EAMH,CAvBkB,CAEf,MAAKH,KAAL,CAAa,CACTC,QAAQ,CAAE,EADD,CAETC,QAAQ,CAAE,EAFD,CAAb,CAFe,aAMlB,C,wCAmBD,iBAAS,CACL,MAAO,CAAC,KAAKX,KAAL,CAAWa,OAAX,CAAmBG,IAApB,cACC,wCACI,YAAK,SAAS,CAAC,iBAAf,uBACI,YAAK,SAAS,CAAC,qBAAf,uBACI,WAAI,SAAS,CAAC,OAAd,mBADJ,EADJ,EADJ,cAMI,aANJ,cAOI,aAPJ,cAQI,aAAM,QAAQ,CAAE,KAAKT,KAArB,uBACI,YAAK,SAAS,CAAC,+BAAf,uBACI,aAAK,SAAS,CAAC,qBAAf,wBACI,aAAK,SAAS,CAAC,OAAf,wBACI,cAAO,SAAS,CAAC,OAAjB,qBADJ,cAEI,cACI,SAAS,CAAC,OADd,CAEI,IAAI,CAAC,OAFT,CAGI,IAAI,CAAC,UAHT,CAII,QAAQ,CAAE,KAAKN,YAJnB,EAFJ,GADJ,cAUI,aAAK,SAAS,CAAC,OAAf,wBACI,cAAO,SAAS,CAAC,OAAjB,wBADJ,cAEI,cACI,SAAS,CAAC,OADd,CAEI,IAAI,CAAC,UAFT,CAGI,IAAI,CAAC,UAHT,CAII,QAAQ,CAAE,KAAKA,YAJnB,EAFJ,GAVJ,CAmBC,KAAKQ,KAAL,CAAWG,KAAX,eACG,YAAK,SAAS,CAAC,iBAAf,UAAkC,KAAKH,KAAL,CAAWG,KAA7C,EApBJ,cAsBA,YAAK,SAAS,CAAC,mBAAf,uBACI,eACI,SAAS,CAAC,+CADd,oBADJ,EAtBA,GADJ,EADJ,EARJ,GADD,cA6CH,KAAC,QAAD,EAAU,EAAE,CAAC,WAAb,EA7CJ,CA+CH,C,mBA1EehB,S,EA6EpB,cAAeE,YAAW,CAACC,KAAD,CAA1B"},"metadata":{},"sourceType":"module"}