{"ast":null,"code":"import { getAuth, signInAnonymously } from 'firebase/auth';\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, collection, onSnapshot } from \"firebase/firestore\";\nimport { firebaseConfig } from \"./firebase.config\"; // init Firebase\n\nconst app = initializeApp(firebaseConfig); // init services\n\nexport const db = getFirestore(app);\nexport const auth = getAuth(); // get paintings\n\nexport const paintingsRef = collection(db, 'paintings'); // real time collection data\n// let paintings = []\n// onSnapshot(paintingsRef, (snapshot) => {\n//     snapshot.docs.forEach((doc) => {\n//       paintings.push({ ...doc.data(), id: doc.id })\n//     })\n//     console.log(paintings)\n//     return paintings\n//   })\n// export const paintingData = paintings\n\nexport const getProducts = db => {\n  return new Promise((resolve, reject) => {\n    db.collection(\"paintings\").get().then(onSnapshot => {\n      let paintings = [];\n      onSnapshot(paintingsRef, snapshot => {\n        snapshot.docs.forEach(doc => {\n          let prod = {\n            id: doc.id,\n            title: doc.data().title,\n            artist: doc.data().artist,\n            date: doc.data().date,\n            place: doc.data().place,\n            description: doc.data().description,\n            image: doc.data().image,\n            link: doc.data().link,\n            medium: doc.data().medium,\n            price: doc.data().price,\n            stock: doc.data().stock\n          };\n          paintings.push(prod);\n        });\n        resolve(paintings);\n      });\n    });\n  });\n};\nexport const signInUser = signInAnonymously(auth);\nexport const updateProducts = (db, products) => {\n  let listPromises = products.map((prod, index) => {\n    return updateProduct(db, prod);\n  });\n  return Promise.all(listPromises);\n};\nexport const updateProduct = (db, item) => {\n  return db.collection(\"paintings\").doc(item.id).update({\n    stock: item.stock\n  });\n};","map":{"version":3,"names":["getAuth","signInAnonymously","initializeApp","getFirestore","collection","onSnapshot","firebaseConfig","app","db","auth","paintingsRef","getProducts","Promise","resolve","reject","get","then","paintings","snapshot","docs","forEach","doc","prod","id","title","data","artist","date","place","description","image","link","medium","price","stock","push","signInUser","updateProducts","products","listPromises","map","index","updateProduct","all","item","update"],"sources":["/Users/bridgerbrown/ecommerce-basic/src/Firebase/index.js"],"sourcesContent":["import { getAuth, signInAnonymously } from 'firebase/auth'\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, collection, onSnapshot } from \"firebase/firestore\";\nimport { firebaseConfig } from \"./firebase.config\"\n  \n// init Firebase\nconst app = initializeApp(firebaseConfig);\n\n// init services\nexport const db = getFirestore(app);\nexport const auth = getAuth()\n\n// get paintings\nexport const paintingsRef = collection(db, 'paintings')\n\n// real time collection data\n\n// let paintings = []\n// onSnapshot(paintingsRef, (snapshot) => {\n//     snapshot.docs.forEach((doc) => {\n//       paintings.push({ ...doc.data(), id: doc.id })\n//     })\n//     console.log(paintings)\n//     return paintings\n//   })\n\n// export const paintingData = paintings\n\n\nexport const getProducts = (db) => {\n  return new Promise((resolve, reject) => {\n    db.collection(\"paintings\")\n      .get()\n      .then((onSnapshot) => {\n        let paintings = [];\n        onSnapshot(paintingsRef, (snapshot) => {\n          snapshot.docs.forEach((doc) => {\n          let prod = {\n            id: doc.id,\n            title: doc.data().title,\n            artist: doc.data().artist,\n            date: doc.data().date,\n            place: doc.data().place,\n            description: doc.data().description,\n            image: doc.data().image,\n            link: doc.data().link,\n            medium: doc.data().medium,\n            price: doc.data().price,\n            stock: doc.data().stock,\n\n          };\n\n          paintings.push(prod);\n        });\n        resolve(paintings);\n      })\n  });\n})}\n\n\nexport const signInUser = signInAnonymously(auth)\n\n\nexport const updateProducts = (db, products) => {\n  let listPromises = products.map((prod, index) => {\n    return updateProduct(db, prod);\n  });\n\n  return Promise.all(listPromises);\n};\n\nexport const updateProduct = (db, item) => {\n  return db.collection(\"paintings\").doc(item.id).update({\n    stock: item.stock,\n  });\n};"],"mappings":"AAAA,SAASA,OAAT,EAAkBC,iBAAlB,QAA2C,eAA3C;AACA,SAASC,aAAT,QAA8B,cAA9B;AACA,SAASC,YAAT,EAAuBC,UAAvB,EAAmCC,UAAnC,QAAqD,oBAArD;AACA,SAASC,cAAT,QAA+B,mBAA/B,C,CAEA;;AACA,MAAMC,GAAG,GAAGL,aAAa,CAACI,cAAD,CAAzB,C,CAEA;;AACA,OAAO,MAAME,EAAE,GAAGL,YAAY,CAACI,GAAD,CAAvB;AACP,OAAO,MAAME,IAAI,GAAGT,OAAO,EAApB,C,CAEP;;AACA,OAAO,MAAMU,YAAY,GAAGN,UAAU,CAACI,EAAD,EAAK,WAAL,CAA/B,C,CAEP;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAGA,OAAO,MAAMG,WAAW,GAAIH,EAAD,IAAQ;EACjC,OAAO,IAAII,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;IACtCN,EAAE,CAACJ,UAAH,CAAc,WAAd,EACGW,GADH,GAEGC,IAFH,CAESX,UAAD,IAAgB;MACpB,IAAIY,SAAS,GAAG,EAAhB;MACAZ,UAAU,CAACK,YAAD,EAAgBQ,QAAD,IAAc;QACrCA,QAAQ,CAACC,IAAT,CAAcC,OAAd,CAAuBC,GAAD,IAAS;UAC/B,IAAIC,IAAI,GAAG;YACTC,EAAE,EAAEF,GAAG,CAACE,EADC;YAETC,KAAK,EAAEH,GAAG,CAACI,IAAJ,GAAWD,KAFT;YAGTE,MAAM,EAAEL,GAAG,CAACI,IAAJ,GAAWC,MAHV;YAITC,IAAI,EAAEN,GAAG,CAACI,IAAJ,GAAWE,IAJR;YAKTC,KAAK,EAAEP,GAAG,CAACI,IAAJ,GAAWG,KALT;YAMTC,WAAW,EAAER,GAAG,CAACI,IAAJ,GAAWI,WANf;YAOTC,KAAK,EAAET,GAAG,CAACI,IAAJ,GAAWK,KAPT;YAQTC,IAAI,EAAEV,GAAG,CAACI,IAAJ,GAAWM,IARR;YASTC,MAAM,EAAEX,GAAG,CAACI,IAAJ,GAAWO,MATV;YAUTC,KAAK,EAAEZ,GAAG,CAACI,IAAJ,GAAWQ,KAVT;YAWTC,KAAK,EAAEb,GAAG,CAACI,IAAJ,GAAWS;UAXT,CAAX;UAeAjB,SAAS,CAACkB,IAAV,CAAeb,IAAf;QACD,CAjBC;QAkBFT,OAAO,CAACI,SAAD,CAAP;MACD,CApBW,CAAV;IAqBL,CAzBC;EA0BH,CA3BQ,CAAP;AA2BC,CA5BI;AA+BP,OAAO,MAAMmB,UAAU,GAAGnC,iBAAiB,CAACQ,IAAD,CAApC;AAGP,OAAO,MAAM4B,cAAc,GAAG,CAAC7B,EAAD,EAAK8B,QAAL,KAAkB;EAC9C,IAAIC,YAAY,GAAGD,QAAQ,CAACE,GAAT,CAAa,CAAClB,IAAD,EAAOmB,KAAP,KAAiB;IAC/C,OAAOC,aAAa,CAAClC,EAAD,EAAKc,IAAL,CAApB;EACD,CAFkB,CAAnB;EAIA,OAAOV,OAAO,CAAC+B,GAAR,CAAYJ,YAAZ,CAAP;AACD,CANM;AAQP,OAAO,MAAMG,aAAa,GAAG,CAAClC,EAAD,EAAKoC,IAAL,KAAc;EACzC,OAAOpC,EAAE,CAACJ,UAAH,CAAc,WAAd,EAA2BiB,GAA3B,CAA+BuB,IAAI,CAACrB,EAApC,EAAwCsB,MAAxC,CAA+C;IACpDX,KAAK,EAAEU,IAAI,CAACV;EADwC,CAA/C,CAAP;AAGD,CAJM"},"metadata":{},"sourceType":"module"}