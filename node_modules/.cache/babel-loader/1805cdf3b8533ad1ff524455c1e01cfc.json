{"ast":null,"code":"var _jsxFileName = \"/Users/bridgerbrown/ecommerce-basic/src/App.js\";\nimport './App.css';\nimport React, { Component } from 'react';\nimport { Route, Routes, Link, BrowserRouter as Router } from \"react-router-dom\";\nimport jwt_decode from 'jwt-decode';\nimport axios from 'axios';\nimport Firebase from 'firebase/app';\nimport AddProduct from './components/AddProduct';\nimport Cart from './components/Cart';\nimport Login from './components/Login';\nimport ProductList from './components/ProductList';\nimport Context from \"./Context\";\nimport { getAuth, signInAnonymously } from 'firebase/auth';\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, collection, addDoc, deleteDoc, doc, onSnapshot } from \"firebase/firestore\"; // init firebase\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD-93dTvcqceIgA7eiJ-ZTGGuP0pgSfR8I\",\n  authDomain: \"ecommerce-f2425.firebaseapp.com\",\n  projectId: \"ecommerce-f2425\",\n  storageBucket: \"ecommerce-f2425.appspot.com\",\n  messagingSenderId: \"342964477004\",\n  appId: \"1:342964477004:web:0c45cbd1a73981775b68e9\"\n};\nconst app = initializeApp(firebaseConfig); // init services\n\nconst db = getFirestore(app);\nconst colRef = collection(db, 'paintings');\nconst auth = getAuth(); // real time collection data\n\nlet paintings = [];\nonSnapshot(colRef, snapshot => {\n  snapshot.docs.forEach(doc => {\n    paintings.push({ ...doc.data(),\n      id: doc.id\n    });\n  });\n  console.log(paintings);\n}); // adding documents\n\nconst addToCart = document.querySelector('.add');\naddToCart.addEventListener('submit', e => {\n  e.preventDefault();\n  addDoc(colRef, {\n    title: addToCart.title.value,\n    author: addToCart.author.value\n  }).then(() => {});\n}); // deleting documents\n\nconst deleteFromCart = document.querySelector('.delete');\ndeleteFromCart.addEventListener('submit', e => {\n  e.preventDefault();\n  const docRef = doc(db, 'books', deleteFromCart.id.value);\n  deleteDoc(docRef).then(() => {\n    deleteFromCart.reset();\n  });\n});\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.login = async username => {\n      const res = await signInAnonymously().then(cred => {\n        console.log('user created', cred.user);\n      }).catch(res => {\n        return {\n          status: 401,\n          message: 'Unauthorized'\n        };\n      });\n\n      if (res.status === 200) {\n        const user = {\n          username\n        };\n        this.setState({\n          user\n        });\n        localStorage.setItem(\"user\", JSON.stringify(user));\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    this.logout = e => {\n      e.preventDefault();\n      this.setState({\n        user: null\n      });\n      localStorage.removeItem(\"user\");\n    };\n\n    this.addProduct = (product, callback) => {\n      let products = this.state.products.slice();\n      products.push(product);\n      this.setState({\n        products\n      }, () => callback && callback());\n    };\n\n    this.addToCart = cartItem => {\n      let cart = this.state.cart;\n\n      if (cart[cartItem.id]) {\n        cart[cartItem.id].amount += cartItem.amount;\n      } else {\n        cart[cartItem.id] = cartItem;\n      }\n\n      if (cart[cartItem.id].amount > cart[cartItem.id].product.stock) {\n        cart[cartItem.id].amount = cart[cartItem.id].product.stock;\n      }\n\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      this.setState({\n        cart\n      });\n    };\n\n    this.removeFromCart = cartItemId => {\n      let cart = this.state.cart;\n      delete cart[cartItemId];\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      this.setState({\n        cart\n      });\n    };\n\n    this.clearCart = () => {\n      let cart = {};\n      localStorage.removeItem(\"cart\");\n      this.setState({\n        cart\n      });\n    };\n\n    this.checkout = () => {\n      if (!this.state.user) {\n        this.routerRef.current.history.push(\"/login\");\n        return;\n      }\n\n      const cart = this.state.cart;\n      const products = this.state.products.map(p => {\n        if (cart[p.name]) {\n          p.stock = p.stock - cart[p.name].amount;\n          axios.put(`http://localhost:3001/products/${p.id}`, { ...p\n          });\n        }\n\n        return p;\n      });\n      this.setState({\n        products\n      });\n      this.clearCart();\n    };\n\n    this.state = {\n      user: null,\n      cart: {},\n      products: []\n    };\n    this.routerRef = /*#__PURE__*/React.createRef();\n  }\n\n  async componentDidMount() {\n    let user = auth;\n    let cart = localStorage.getItem(\"cart\");\n    const products = paintings;\n    cart = cart ? JSON.parse(cart) : {};\n    this.setState({\n      user,\n      products: products,\n      cart\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Context.Provider, {\n      value: { ...this.state,\n        removeFromCart: this.removeFromCart,\n        addToCart: this.addToCart,\n        login: this.login,\n        addProduct: this.addProduct,\n        clearCart: this.clearCart,\n        checkout: this.checkout\n      },\n      children: /*#__PURE__*/_jsxDEV(Router, {\n        ref: this.routerRef,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"App\",\n          children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n            className: \"navbar container\",\n            role: \"navigation\",\n            \"aria-label\": \"main navigation\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"navbar-brand\",\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                className: \"navbar-item is-size-4\",\n                children: \"ecommerce\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                role: \"button\",\n                class: \"navbar-burger burger\",\n                \"aria-label\": \"menu\",\n                \"aria-expanded\": \"false\",\n                \"data-target\": \"navbarBasicExample\",\n                onClick: e => {\n                  e.preventDefault();\n                  this.setState({\n                    showMenu: !this.state.showMenu\n                  });\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `navbar-menu ${this.state.showMenu ? \"is-active\" : \"\"}`,\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: \"/products\",\n                className: \"navbar-item\",\n                children: \"Products\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 15\n              }, this), this.state.user && this.state.user.accessLevel < 1 && /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/add-product\",\n                className: \"navbar-item\",\n                children: \"Add Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/cart\",\n                className: \"navbar-item\",\n                children: [\"Cart\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"tag is-primary\",\n                  style: {\n                    marginLeft: \"5px\"\n                  },\n                  children: Object.keys(this.state.cart).length\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 15\n              }, this), !this.state.user ? /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/login\",\n                className: \"navbar-item\",\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 17\n              }, this) : /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/\",\n                onClick: this.logout,\n                className: \"navbar-item\",\n                children: \"Logout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Routes, {\n            children: [/*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/\",\n              element: /*#__PURE__*/_jsxDEV(ProductList, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 44\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/login\",\n              element: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/cart\",\n              element: /*#__PURE__*/_jsxDEV(Cart, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 48\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/add-product\",\n              element: /*#__PURE__*/_jsxDEV(AddProduct, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 55\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/products\",\n              element: /*#__PURE__*/_jsxDEV(ProductList, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 52\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 3\n    }, this);\n  }\n\n}","map":{"version":3,"names":["React","Component","Route","Routes","Link","BrowserRouter","Router","jwt_decode","axios","Firebase","AddProduct","Cart","Login","ProductList","Context","getAuth","signInAnonymously","initializeApp","getFirestore","collection","addDoc","deleteDoc","doc","onSnapshot","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","db","colRef","auth","paintings","snapshot","docs","forEach","push","data","id","console","log","addToCart","document","querySelector","addEventListener","e","preventDefault","title","value","author","then","deleteFromCart","docRef","reset","App","constructor","props","login","username","res","cred","user","catch","status","message","setState","localStorage","setItem","JSON","stringify","logout","removeItem","addProduct","product","callback","products","state","slice","cartItem","cart","amount","stock","removeFromCart","cartItemId","clearCart","checkout","routerRef","current","history","map","p","name","put","createRef","componentDidMount","getItem","parse","render","showMenu","accessLevel","marginLeft","Object","keys","length"],"sources":["/Users/bridgerbrown/ecommerce-basic/src/App.js"],"sourcesContent":["import './App.css';\nimport React, { Component } from 'react';\nimport { Route, Routes, Link, BrowserRouter as Router } from \"react-router-dom\"\nimport jwt_decode from 'jwt-decode'\nimport axios from 'axios'\nimport Firebase from 'firebase/app'\nimport AddProduct from './components/AddProduct';\nimport Cart from './components/Cart';\nimport Login from './components/Login';\nimport ProductList from './components/ProductList';\nimport Context from \"./Context\"\nimport {\n  getAuth, signInAnonymously\n} from 'firebase/auth'\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, \n  collection,\n  addDoc, deleteDoc, doc,\n  onSnapshot\n} from \"firebase/firestore\";\n\n// init firebase\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD-93dTvcqceIgA7eiJ-ZTGGuP0pgSfR8I\",\n  authDomain: \"ecommerce-f2425.firebaseapp.com\",\n  projectId: \"ecommerce-f2425\",\n  storageBucket: \"ecommerce-f2425.appspot.com\",\n  messagingSenderId: \"342964477004\",\n  appId: \"1:342964477004:web:0c45cbd1a73981775b68e9\"\n};\nconst app = initializeApp(firebaseConfig);\n\n// init services\nconst db = getFirestore(app);\nconst colRef = collection(db, 'paintings')\nconst auth = getAuth()\n\n\n// real time collection data\nlet paintings = []\n\nonSnapshot(colRef, (snapshot) => {\n  snapshot.docs.forEach((doc) => {\n    paintings.push({ ...doc.data(), id: doc.id })\n  })\n  console.log(paintings)\n})\n\n// adding documents\nconst addToCart = document.querySelector('.add')\naddToCart.addEventListener('submit', (e) => {\n  e.preventDefault()\n\n  addDoc(colRef, {\n    title: addToCart.title.value,\n    author: addToCart.author.value\n  })\n  .then(() => {\n\n  })\n})\n\n// deleting documents\nconst deleteFromCart = document.querySelector('.delete')\ndeleteFromCart.addEventListener('submit', (e) => {\n  e.preventDefault()\n\n  const docRef = doc(db, 'books', deleteFromCart.id.value)\n  deleteDoc(docRef)\n    .then(() => {\n      deleteFromCart.reset()\n  })\n})\n\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      user: null,\n      cart: {},\n      products: []\n    }\n    this.routerRef = React.createRef()\n  }\n\n  async componentDidMount() {\n    let user = auth\n    let cart = localStorage.getItem(\"cart\")\n\n    const products = paintings\n    cart = cart ? JSON.parse(cart) : {}\n\n    this.setState({ user, products: products, cart })\n  }\n\n  login = async (username) => {\n    const res = await signInAnonymously()\n    .then((cred) => {\n      console.log('user created', cred.user)\n    })\n    .catch((res) => {\n      return { status: 401, message: 'Unauthorized'}\n    })\n\n    if(res.status === 200) {\n      const user = {\n        username\n      }\n\n      this.setState({ user })\n      localStorage.setItem(\"user\", JSON.stringify(user))\n      return true\n    } else {\n      return false\n    }\n  }\n\n  logout = e => {\n    e.preventDefault()\n    this.setState({ user: null })\n    localStorage.removeItem(\"user\")\n  }\n\n  addProduct = (product, callback) => {\n    let products = this.state.products.slice()\n    products.push(product)\n    this.setState({ products }, () => callback && callback())\n  }\n\n  addToCart = cartItem => {\n    let cart = this.state.cart\n    if (cart[cartItem.id]) {\n      cart[cartItem.id].amount += cartItem.amount\n    } else {\n      cart[cartItem.id] = cartItem\n    }\n    if (cart[cartItem.id].amount > cart[cartItem.id].product.stock) {\n      cart[cartItem.id].amount = cart[cartItem.id].product.stock\n    }\n    localStorage.setItem(\"cart\", JSON.stringify(cart))\n    this.setState({ cart })\n  }\n\n  removeFromCart = cartItemId => {\n    let cart = this.state.cart\n    delete cart[cartItemId]\n    localStorage.setItem(\"cart\", JSON.stringify(cart))\n    this.setState({ cart })\n  }\n\n  clearCart = () => {\n    let cart = {}\n    localStorage.removeItem(\"cart\")\n    this.setState({ cart })\n  }\n\n  checkout = () => {\n    if (!this.state.user) {\n      this.routerRef.current.history.push(\"/login\")\n      return\n    }\n\n    const cart = this.state.cart\n\n    const products = this.state.products.map(p => {\n      if (cart[p.name]) {\n        p.stock = p.stock - cart[p.name].amount\n\n        axios.put(\n          `http://localhost:3001/products/${p.id}`,\n          { ...p },\n        )\n      }\n      return p\n    })\n\n    this.setState({ products })\n    this.clearCart()\n  }\n\nrender() {\n  return (\n  <Context.Provider\n    value={{\n      ...this.state,\n      removeFromCart: this.removeFromCart,\n      addToCart: this.addToCart,\n      login: this.login,\n      addProduct: this.addProduct,\n      clearCart: this.clearCart,\n      checkout: this.checkout\n    }}\n  >\n    <Router ref={this.routerRef}>\n      <div className='App'>\n        <nav\n          className='navbar container'\n          role='navigation'\n          aria-label='main navigation'\n        >\n        <div className='navbar-brand'>\n          <b className='navbar-item is-size-4'>ecommerce</b>\n          <label\n            role='button'\n            class='navbar-burger burger'\n            aria-label='menu'\n            aria-expanded='false'\n            data-target='navbarBasicExample'\n            onClick={e => {\n              e.preventDefault()\n              this.setState({ showMenu: !this.state.showMenu })\n            }}\n          >\n            <span aria-hidden=\"true\"></span>\n            <span aria-hidden=\"true\"></span>\n            <span aria-hidden=\"true\"></span>\n          </label>\n        </div>\n            <div className={`navbar-menu ${\n              this.state.showMenu ? \"is-active\" : \"\"\n              }`}>\n              <Link to=\"/products\" className='navbar-item'>\n                Products\n              </Link>\n              {this.state.user && this.state.user.accessLevel < 1 && (\n                <Link to=\"/add-product\" className='navbar-item'>\n                  Add Product\n                </Link>\n              )}\n              <Link to=\"/cart\" className='navbar-item'>\n                Cart\n                <span\n                  className='tag is-primary'\n                  style={{ marginLeft: \"5px\" }}\n                >\n                  { Object.keys(this.state.cart).length }\n                </span>\n              </Link>\n              {!this.state.user ? (\n                <Link to=\"/login\" className='navbar-item'>\n                  Login\n                </Link>\n              ) : (\n                <Link to=\"/\" onClick={this.logout} className=\"navbar-item\">\n                  Logout\n                </Link>\n              )}\n            </div>\n          </nav>\n          <Routes>\n            <Route exact path=\"/\" element={<ProductList />} />\n            <Route exact path=\"/login\" element={<Login />} />\n            <Route exact path=\"/cart\" element={<Cart />} />\n            <Route exact path=\"/add-product\" element={<AddProduct />} />\n            <Route exact path=\"/products\" element={<ProductList />} />\n          </Routes>\n        </div>\n      </Router>\n    </Context.Provider>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}