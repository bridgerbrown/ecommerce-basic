{"ast":null,"code":"import _defineProperty from\"/Users/bridgerbrown/ecommerce-basic/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/Users/bridgerbrown/ecommerce-basic/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/bridgerbrown/ecommerce-basic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/bridgerbrown/ecommerce-basic/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/bridgerbrown/ecommerce-basic/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/bridgerbrown/ecommerce-basic/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/bridgerbrown/ecommerce-basic/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import withContext from\"../withContext\";import{Navigate}from\"react-router-dom\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initState={name:\"\",price:\"\",stock:\"\",shortDesc:\"\",description:\"\"};var AddProduct=/*#__PURE__*/function(_Component){_inherits(AddProduct,_Component);var _super=_createSuper(AddProduct);function AddProduct(props){var _this;_classCallCheck(this,AddProduct);_this=_super.call(this,props);_this.save=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _this$state,name,price,stock,shortDesc,description,id;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this$state=_this.state,name=_this$state.name,price=_this$state.price,stock=_this$state.stock,shortDesc=_this$state.shortDesc,description=_this$state.description;if(!(name&&price)){_context.next=10;break;}id=Math.random().toString(36).substring(2)+Date.now().toString(36);_context.next=6;return axios.post('http://localhost:3001/products',{id:id,name:name,price:price,stock:stock,shortDesc:shortDesc,description:description});case 6:_this.props.context.addProduct({name:name,price:price,shortDesc:shortDesc,description:description,stock:stock||0},function(){return _this.setState(initState);});_this.setState({flash:{status:'is-success',msg:'Product created successfully'}});_context.next=11;break;case 10:_this.setState({flash:{status:'is-danger',msg:'Please enter name and price'}});case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(e){var _this$setState;return _this.setState((_this$setState={},_defineProperty(_this$setState,e.target.name,e.target.value),_defineProperty(_this$setState,\"error\",\"\"),_this$setState));};_this.state=initState;return _this;}_createClass(AddProduct,[{key:\"render\",value:function render(){var _this$state2=this.state,name=_this$state2.name,price=_this$state2.price,stock=_this$state2.stock,shortDesc=_this$state2.shortDesc,description=_this$state2.description;var user=this.props.context.user;return!(user&&user.accessLevel<1)?/*#__PURE__*/_jsx(Navigate,{to:\"/\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"hero is-primary \",children:/*#__PURE__*/_jsx(\"div\",{className:\"hero-body container\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"title\",children:\"Add Product\"})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"form\",{onSubmit:this.save,children:/*#__PURE__*/_jsx(\"div\",{className:\"columns is-mobile is-centered\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"column is-one-third\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Product Name: \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",name:\"name\",value:name,onChange:this.handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Price: \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"number\",name:\"price\",value:price,onChange:this.handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Available in Stock: \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"number\",name:\"stock\",value:stock,onChange:this.handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Short Description: \"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",name:\"shortDesc\",value:shortDesc,onChange:this.handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Description: \"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea\",type:\"text\",rows:\"2\",style:{resize:\"none\"},name:\"description\",value:description,onChange:this.handleChange})]}),this.state.flash&&/*#__PURE__*/_jsx(\"div\",{className:\"notification \".concat(this.state.flash.status),children:this.state.flash.msg}),/*#__PURE__*/_jsx(\"div\",{className:\"field is-clearfix\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-primary is-outlined is-pulled-right\",type:\"submit\",onClick:this.save,children:\"Submit\"})})]})})})]});}}]);return AddProduct;}(Component);export default withContext(AddProduct);","map":{"version":3,"names":["React","Component","withContext","Navigate","axios","initState","name","price","stock","shortDesc","description","AddProduct","props","save","e","preventDefault","state","id","Math","random","toString","substring","Date","now","post","context","addProduct","setState","flash","status","msg","handleChange","target","value","user","accessLevel","resize"],"sources":["/Users/bridgerbrown/ecommerce-basic/src/components/AddProduct.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport withContext from \"../withContext\";\nimport { Navigate } from \"react-router-dom\";\nimport axios from 'axios'\n\nconst initState = {\n    name: \"\",\n    price: \"\",\n    stock: \"\",\n    shortDesc: \"\",\n    description: \"\"\n}\n\nclass AddProduct extends Component {\n    constructor(props) {\n        super(props)\n        this.state = initState\n    }\n\n    save = async (e) => {\n        e.preventDefault()\n        const { name, price, stock, shortDesc, description } = this.state\n\n        if (name && price) {\n            const id = Math.random().toString(36).substring(2) + Date.now().toString(36)\n\n            await axios.post(\n                'http://localhost:3001/products',\n                { id, name, price, stock, shortDesc, description }\n            )\n\n            this.props.context.addProduct(\n                {\n                    name,\n                    price,\n                    shortDesc,\n                    description,\n                    stock: stock || 0\n                },\n                () => this.setState(initState)\n            )\n            this.setState(\n                { flash: { status: 'is-success', msg: 'Product created successfully' }}\n            )\n\n        } else {\n            this.setState(\n                { flash: { status: 'is-danger', msg: 'Please enter name and price' }}\n            )\n        }\n    }\n\n    handleChange = e => this.setState({ [e.target.name]: e.target.value, error: \"\" })\n\nrender(){\n    const { name, price, stock, shortDesc, description } = this.state\n    const { user } = this.props.context\n\n    return !(user && user.accessLevel < 1) ? (\n        <Navigate to=\"/\" />\n    ) : (\n        <>\n            <div className=\"hero is-primary \">\n                <div className=\"hero-body container\">\n                    <h4 className=\"title\">Add Product</h4>\n                </div>\n            </div>\n            <br />\n            <br />\n            <form onSubmit={this.save}>\n                <div className=\"columns is-mobile is-centered\">\n                    <div className=\"column is-one-third\">\n                        <div className=\"field\">\n                            <label className=\"label\">Product Name: </label>\n                            <input\n                            className=\"input\"\n                            type=\"text\"\n                            name=\"name\"\n                            value={name}\n                            onChange={this.handleChange}\n                            required\n                            />\n                        </div>\n                        <div className=\"field\">\n                            <label className=\"label\">Price: </label>\n                            <input\n                            className=\"input\"\n                            type=\"number\"\n                            name=\"price\"\n                            value={price}\n                            onChange={this.handleChange}\n                            required\n                            />\n                        </div>\n                        <div className=\"field\">\n                            <label className=\"label\">Available in Stock: </label>\n                            <input\n                            className=\"input\"\n                            type=\"number\"\n                            name=\"stock\"\n                            value={stock}\n                            onChange={this.handleChange}\n                            />\n                        </div>\n                        <div className=\"field\">\n                            <label className=\"label\">Short Description: </label>\n                            <input\n                            className=\"input\"\n                            type=\"text\"\n                            name=\"shortDesc\"\n                            value={shortDesc}\n                            onChange={this.handleChange}\n                            />\n                        </div>\n                        <div className=\"field\">\n                            <label className=\"label\">Description: </label>\n                            <textarea\n                            className=\"textarea\"\n                            type=\"text\"\n                            rows=\"2\"\n                            style={{ resize: \"none\" }}\n                            name=\"description\"\n                            value={description}\n                            onChange={this.handleChange}\n                            />\n                        </div>\n                        {this.state.flash && (\n                            <div className={`notification ${this.state.flash.status}`}>\n                            {this.state.flash.msg}\n                            </div>\n                        )}\n                        <div className=\"field is-clearfix\">\n                            <button\n                            className=\"button is-primary is-outlined is-pulled-right\"\n                            type=\"submit\"\n                            onClick={this.save}\n                            >\n                            Submit\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </form>       \n        </>\n        \n        )\n    }\n}\n\nexport default withContext(AddProduct)"],"mappings":"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"},"metadata":{},"sourceType":"module"}