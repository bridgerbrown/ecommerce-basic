{"ast":null,"code":"var _jsxFileName = \"/Users/bridgerbrown/ecommerce-basic/src/App.js\";\nimport './App.css';\nimport React, { Component } from 'react';\nimport { Route, Routes, Link, BrowserRouter as Router } from \"react-router-dom\";\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport AddProduct from './components/AddProduct';\nimport Cart from './components/Cart';\nimport Login from './components/Login';\nimport ProductList from './components/ProductList';\nimport Context from \"./Context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.login = async (email, password) => {\n      const res = await axios.post('http://localhost:3000/login', {\n        email,\n        password\n      }).catch(res => {\n        return {\n          status: 401,\n          message: 'Unauthorized'\n        };\n      });\n\n      if (res.status === 200) {\n        const {\n          email\n        } = jwt_decode(res.data.accessToken);\n        const user = {\n          email,\n          token: res.data.accessToken,\n          accessLevel: email === 'admin@example.com' ? 0 : 1\n        };\n        this.setState({\n          user\n        });\n        localStorage.setItem(\"user\", JSON.stringify(user));\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    this.logout = e => {\n      e.preventDefault();\n      this.setState({\n        user: null\n      });\n      localStorage.removeItem(\"user\");\n    };\n\n    this.state = {\n      user: null,\n      cart: {},\n      products: []\n    };\n  }\n\n  componentDidMount() {\n    let user = localStorage.getItem(\"user\");\n    user = user ? JSON.parse(user) : null;\n    this.setState({\n      user\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Context.Provider, {\n      value: { ...this.state,\n        removeFromCart: this.removeFromCart,\n        addToCart: this.addToCart,\n        login: this.login,\n        addProduct: this.addProduct,\n        clearCart: this.clearCart,\n        checkout: this.checkout\n      },\n      children: /*#__PURE__*/_jsxDEV(Router, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"App\",\n          children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n            className: \"navbar container\",\n            role: \"navigation\",\n            \"aria-label\": \"main navigation\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"navbar-brand\",\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                className: \"navbar-item is-size-4\",\n                children: \"ecommerce\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                role: \"button\",\n                class: \"navbar-burger burger\",\n                \"aria-label\": \"menu\",\n                \"aria-expanded\": \"false\",\n                \"data-target\": \"navbarBasicExample\",\n                onClick: e => {\n                  e.preventDefault();\n                  this.setState({\n                    showMenu: !this.state.showMenu\n                  });\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `navbar-menu ${this.state.showMenu ? \"is-active\" : \"\"}`,\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: \"/products\",\n                className: \"navbar-item\",\n                children: \"Products\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 15\n              }, this), this.state.user && this.state.user.accessLevel < 1 && /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/add-product\",\n                className: \"navbar-item\",\n                children: \"Add Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/cart\",\n                className: \"navbar-item\",\n                children: [\"Cart\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"tag is-primary\",\n                  style: {\n                    marginLeft: \"5px\"\n                  },\n                  children: Object.keys(this.state.cart).length\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 15\n              }, this), !this.state.user ? /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/login\",\n                className: \"navbar-item\",\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 17\n              }, this) : /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/\",\n                onClick: this.logout,\n                className: \"navbar-item\",\n                children: \"Logout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Routes, {\n            children: [/*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/\",\n              element: ProductList\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/login\",\n              element: Login\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/cart\",\n              element: Cart\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/add-product\",\n              element: AddProduct\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              exact: true,\n              path: \"/products\",\n              element: ProductList\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 3\n    }, this);\n  }\n\n}","map":{"version":3,"names":["React","Component","Route","Routes","Link","BrowserRouter","Router","axios","jwt_decode","AddProduct","Cart","Login","ProductList","Context","App","constructor","props","login","email","password","res","post","catch","status","message","data","accessToken","user","token","accessLevel","setState","localStorage","setItem","JSON","stringify","logout","e","preventDefault","removeItem","state","cart","products","componentDidMount","getItem","parse","render","removeFromCart","addToCart","addProduct","clearCart","checkout","showMenu","marginLeft","Object","keys","length"],"sources":["/Users/bridgerbrown/ecommerce-basic/src/App.js"],"sourcesContent":["import './App.css';\nimport React, { Component } from 'react';\nimport { Route, Routes, Link, BrowserRouter as Router } from \"react-router-dom\"\nimport axios from 'axios'\nimport jwt_decode from 'jwt-decode'\n\nimport AddProduct from './components/AddProduct';\nimport Cart from './components/Cart';\nimport Login from './components/Login';\nimport ProductList from './components/ProductList';\n\nimport Context from \"./Context\"\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      user: null,\n      cart: {},\n      products: []\n    }\n  }\n\n  componentDidMount() {\n    let user = localStorage.getItem(\"user\")\n    user = user ? JSON.parse(user) : null\n    this.setState({ user })\n  }\n\n  login = async (email, password) => {\n    const res = await axios.post(\n      'http://localhost:3000/login',\n      { email, password },\n    ).catch((res) => {\n      return { status: 401, message: 'Unauthorized'}\n    })\n\n    if(res.status === 200) {\n      const { email } = jwt_decode(res.data.accessToken)\n      const user = {\n        email,\n        token: res.data.accessToken,\n        accessLevel: email === 'admin@example.com' ? 0 : 1\n      }\n\n      this.setState({ user })\n      localStorage.setItem(\"user\", JSON.stringify(user))\n      return true\n    } else {\n      return false\n    }\n  }\n\n  logout = e => {\n    e.preventDefault()\n    this.setState({ user: null })\n    localStorage.removeItem(\"user\")\n  }\n\nrender() {\n  return (\n  <Context.Provider\n    value={{\n      ...this.state,\n      removeFromCart: this.removeFromCart,\n      addToCart: this.addToCart,\n      login: this.login,\n      addProduct: this.addProduct,\n      clearCart: this.clearCart,\n      checkout: this.checkout\n    }}\n  >\n    <Router>\n      <div className='App'>\n        <nav\n          className='navbar container'\n          role='navigation'\n          aria-label='main navigation'\n        >\n        <div className='navbar-brand'>\n          <b className='navbar-item is-size-4'>ecommerce</b>\n          <label\n            role='button'\n            class='navbar-burger burger'\n            aria-label='menu'\n            aria-expanded='false'\n            data-target='navbarBasicExample'\n            onClick={e => {\n              e.preventDefault()\n              this.setState({ showMenu: !this.state.showMenu })\n            }}\n          >\n            <span aria-hidden=\"true\"></span>\n            <span aria-hidden=\"true\"></span>\n            <span aria-hidden=\"true\"></span>\n          </label>\n        </div>\n            <div className={`navbar-menu ${\n              this.state.showMenu ? \"is-active\" : \"\"\n              }`}>\n              <Link to=\"/products\" className='navbar-item'>\n                Products\n              </Link>\n              {this.state.user && this.state.user.accessLevel < 1 && (\n                <Link to=\"/add-product\" className='navbar-item'>\n                  Add Product\n                </Link>\n              )}\n              <Link to=\"/cart\" className='navbar-item'>\n                Cart\n                <span\n                  className='tag is-primary'\n                  style={{ marginLeft: \"5px\" }}\n                >\n                  { Object.keys(this.state.cart).length }\n                </span>\n              </Link>\n              {!this.state.user ? (\n                <Link to=\"/login\" className='navbar-item'>\n                  Login\n                </Link>\n              ) : (\n                <Link to=\"/\" onClick={this.logout} className=\"navbar-item\">\n                  Logout\n                </Link>\n              )}\n            </div>\n          </nav>\n          <Routes>\n            <Route exact path=\"/\" element={ProductList} />\n            <Route exact path=\"/login\" element={Login} />\n            <Route exact path=\"/cart\" element={Cart} />\n            <Route exact path=\"/add-product\" element={AddProduct} />\n            <Route exact path=\"/products\" element={ProductList} />\n          </Routes>\n        </div>\n      </Router>\n    </Context.Provider>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}