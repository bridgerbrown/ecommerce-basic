{"ast":null,"code":"import { getAuth, signInAnonymously } from 'firebase/auth';\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, collection, onSnapshot } from \"firebase/firestore\";\nimport { firebaseConfig } from \"./firebase.config\"; // init Firebase\n\nconst app = initializeApp(firebaseConfig); // init services\n\nexport const db = getFirestore(app);\nexport const auth = getAuth(); // get paintings\n\nexport const paintingsRef = collection(db, 'paintings'); // real time collection data\n\nlet paintings = [];\nonSnapshot(paintingsRef, snapshot => {\n  snapshot.docs.forEach(doc => {\n    paintings.push({ ...doc.data(),\n      id: doc.id\n    });\n  });\n  console.log(paintings);\n  return paintings;\n});\nexport const paintingData = paintings;\nexport const getProducts = db => {\n  return new Promise((resolve, reject) => {\n    db.collection(\"paintings\").get().then(querySnapshot => {\n      let products = [];\n      querySnapshot.forEach(doc => {\n        let prod = {\n          id: doc.id,\n          title: doc.data().title,\n          artist: doc.data().artist,\n          date: doc.data().date,\n          place: doc.data().place,\n          description: doc.data().description,\n          image: doc.data().image,\n          link: doc.data().link,\n          medium: doc.data().medium,\n          price: doc.data().price,\n          stock: doc.data().stock\n        };\n        products.push(prod);\n      });\n      resolve(products);\n    }).catch(error => reject(error));\n  });\n};\nexport const signInUser = signInAnonymously(auth);\nexport const updateProducts = (db, products) => {\n  let listPromises = products.map((prod, index) => {\n    return updateProduct(db, prod);\n  });\n  return Promise.all(listPromises);\n};\nexport const updateProduct = (db, item) => {\n  return db.collection(\"paintings\").doc(item.id).update({\n    stock: item.stock\n  });\n};","map":{"version":3,"names":["getAuth","signInAnonymously","initializeApp","getFirestore","collection","onSnapshot","firebaseConfig","app","db","auth","paintingsRef","paintings","snapshot","docs","forEach","doc","push","data","id","console","log","paintingData","getProducts","Promise","resolve","reject","get","then","querySnapshot","products","prod","title","artist","date","place","description","image","link","medium","price","stock","catch","error","signInUser","updateProducts","listPromises","map","index","updateProduct","all","item","update"],"sources":["/Users/bridgerbrown/ecommerce-basic/src/Firebase/index.js"],"sourcesContent":["import { getAuth, signInAnonymously } from 'firebase/auth'\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, collection, onSnapshot } from \"firebase/firestore\";\nimport { firebaseConfig } from \"./firebase.config\"\n  \n// init Firebase\nconst app = initializeApp(firebaseConfig);\n\n// init services\nexport const db = getFirestore(app);\nexport const auth = getAuth()\n\n// get paintings\nexport const paintingsRef = collection(db, 'paintings')\n\n// real time collection data\n\nlet paintings = []\nonSnapshot(paintingsRef, (snapshot) => {\n    snapshot.docs.forEach((doc) => {\n      paintings.push({ ...doc.data(), id: doc.id })\n    })\n    console.log(paintings)\n    return paintings\n  })\n\nexport const paintingData = paintings\n\n\nexport const getProducts = (db) => {\n  return new Promise((resolve, reject) => {\n    db.collection(\"paintings\")\n      .get()\n      .then((querySnapshot) => {\n        let products = [];\n        querySnapshot.forEach((doc) => {\n          let prod = {\n            id: doc.id,\n            title: doc.data().title,\n            artist: doc.data().artist,\n            date: doc.data().date,\n            place: doc.data().place,\n            description: doc.data().description,\n            image: doc.data().image,\n            link: doc.data().link,\n            medium: doc.data().medium,\n            price: doc.data().price,\n            stock: doc.data().stock,\n\n          };\n\n          products.push(prod);\n        });\n        resolve(products);\n      })\n      .catch((error) => reject(error));\n  });\n};\n\n\nexport const signInUser = signInAnonymously(auth)\n\n\nexport const updateProducts = (db, products) => {\n  let listPromises = products.map((prod, index) => {\n    return updateProduct(db, prod);\n  });\n\n  return Promise.all(listPromises);\n};\n\nexport const updateProduct = (db, item) => {\n  return db.collection(\"paintings\").doc(item.id).update({\n    stock: item.stock,\n  });\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}